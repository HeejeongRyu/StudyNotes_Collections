# 📌 인덱스 손익분기점 (Index Break-even Point)

## 1. 정의
**인덱스 손익분기점**이란,  
`Index Range Scan + Table Access by ROWID` 방식과 `Table Full Scan` 방식의 성능이 같아지는 지점을 의미합니다.  

이 지점을 기준으로:
- **데이터 추출 비율이 낮을 때** → 인덱스 스캔이 유리
- **데이터 추출 비율이 높을 때** → 풀 테이블 스캔이 유리

---

## 2. 성능 차이를 만드는 요인
### (1) I/O 특성
- **인덱스 스캔**: 각 row마다 **랜덤 I/O** 발생 → 소량 데이터 추출에 적합
- **풀 테이블 스캔**: 테이블 블록을 **순차적 I/O**로 읽음 → 대량 데이터 추출에 유리

### (2) 선택도 (Selectivity)
- 조건절로 걸러지는 데이터의 비율을 의미
- 선택도가 높아(= 소량 추출)질수록 인덱스 효율 ↑
- 선택도가 낮아(= 다량 추출)지면 풀스캔 효율 ↑

### (3) 클러스터링 팩터 (Clustering Factor)
- 인덱스 정렬 순서와 실제 테이블 저장 순서의 일치 정도
- 일치도가 낮을수록 랜덤 I/O 증가 → 손익분기점이 빨라짐

---

## 3. 손익분기점의 일반적 기준
- **전체 데이터의 약 5~15%** 수준을 초과하면 풀 테이블 스캔이 더 빠르다고 알려짐
  - 5%: 클러스터링 팩터가 나쁜 경우
  - 10~15%: 평균적인 기준
  - 20% 이상: 거의 항상 풀스캔이 더 유리

---

## 4. 실행계획 예시
```sql
EXPLAIN PLAN FOR
SELECT * FROM orders WHERE status = 'CLOSED';

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);
```

- 옵티마이저가 `INDEX RANGE SCAN + TABLE ACCESS BY ROWID` 를 선택 → 손익분기점 이내
- 옵티마이저가 `TABLE ACCESS FULL` 을 선택 → 손익분기점 초과

---

## 5. 튜닝 포인트
- 손익분기점 이상 데이터 추출 → **풀 테이블 스캔**이 효율적
- 인덱스 힌트 강제 사용 시 성능 저하 가능
- **조건절 선택도, 통계정보, 클러스터링 팩터**를 종합적으로 고려해야 함

---

## ✅ 결론
- **인덱스 손익분기점**은 인덱스 스캔 성능과 풀스캔 성능이 같아지는 지점
- **5~15% 데이터 추출**을 경계로 성능 차이가 발생
- 소량 추출 시 인덱스, 대량 추출 시 풀스캔이 유리
